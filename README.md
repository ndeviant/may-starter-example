![nunjacks-bem-starter](https://i.imgur.com/0AG0txq.png)

# nunjacks-bem-starter

## Особенности

- сборка предназначена для автоматизации задач в повседневной front-end разработке
- именование классов по [БЭМ](https://ru.bem.info/)
- использование шаблонизатора [nunjacks](https://mozilla.github.io/nunjucks/)
- использование препроцессора [SCSS](https://sass-lang.com/)
- использование транспайлера [Babel](https://babeljs.io/) для поддержки современного JavaScript (ES6) в браузерах
- использование [Webpack](https://webpack.js.org/) для сборки JavaScript-модулей

## Установка

- установите [Yarn](https://yarnpkg.com/en/docs/install)

> Yarn - это современная альтернатива npm. Yarn работает с тем же файлом `package.json` и так же скачивает необходимые модули в папку `node_modules`, но делает это намного быстрее.

- скачайте сборку: `git clone https://github.com/ndeviant/nunjacks-bem-starter.git`
- установите `gulp` и `bem-tools-core` глобально: `yarn global add gulp-cli bem-tools-core`
- перейдите в скачанную папку со сборкой: `cd nunjacks-bem-starter`
- скачайте необходимые зависимости: `yarn`
- чтобы начать работу, введите команду: `yarn start` (режим разработки)
- чтобы собрать проект, введите команду `yarn run build` (режим сборки)

Если вы всё сделали правильно, у вас должен открыться браузер с локальным сервером.
Режим сборки предполагает оптимизацию проекта: сжатие изображений, минифицирование CSS и JS-файлов для загрузки на сервер.

## Файловая структура

```
nunjacks-bem-starter
├── dist
├── src
│   ├── components
│   ├── fonts
│   ├── img
│   ├── js
│   ├── sass
│   ├── views
│   └── .htaccess
├── gulpfile.babel.js
├── webpack.config.js
├── package.json
├── .babelrc.js
├── .bemrc.js
├── .eslintrc.json
└── .gitignore
```

- Корень папки:
  _ `.babelrc.js` — настройка ES6
  _ `.bemrc.js` — настройка БЭМ
  _ `.eslintrc.js` — настройка ESLint
  _ `.prettierrc.js` — настройка ESLint
  _ `.gitignore` – запрет на отслеживание файлов Git'ом
  _ `gulpfile.babel.js` — настройки Gulp
  \_ `webpack.config.js` — настройки Webpack \* `package.json` — список зависимостей
- Папка `src` - используется во время разработки:
  _ БЭМ-блоки и компоненты: `src/components`
  _ шрифты: `src/fonts`
  _ изображения: `src/img`
  _ JS-файлы: `src/js`
  _ SCSS-файлы: `src/styles`
  _ Njk-файлы: `src/views`
  _ страницы сайта: `src/views/pages`
  _ конфигурационный файл веб-сервера Apache с настройками [gzip](https://habr.com/ru/post/221849/) (сжатие без потерь): `src/.htaccess`
- Папка `dist` - папка, из которой запускается локальный сервер для разработки (при запуске `yarn run dev`)

## Рекомендации по использованию

- придерживайтесь изначальной структуры папок и файлов
- придерживайтесь компонентного подхода к разработке сайтов
  _ каждый БЭМ-блок имеет свою папку внутри `src/components/modules`
  _ папка одного БЭМ-блока содержит в себе один Njk-файл, один SCSS-файл и один JS-файл (если у блока используется скрипт)
  \_ SCSS-файл блока импортируется в файл `src/components/modules/_modules.scss`, который в свою очередь импортируется в файл `src/styles/main.scss` \* JS-файл блока импортируется в `src/js/import/modules.js`, который в свою очередь импортируется в файл `src/js/index.js`
- компоненты (например, иконки, кнопки) оформляются в Njk с помощью примесей
  _ каждый компонент имеет свою папку внутри `src/components/components`
  _ папка одного компонента содержит в себе один Njk-файл, один SCSS-файл и один JS-файл
  _ Njk-файл компонента импортируется в файл `src/views/layouts/default.pug`, который в свою очередь импортируется в файл `src/views/index.pug`
  _ SCSS-файл компонента импортируется в файл `src/components/components/_components.scss`, который в свою очередь импортируется в файл `src/styles/main.scss` \* JS-файл компонента импортируется в файл `src/js/import/components.js`, который в свою очередь импортируется в файл `src/js/index.js`
- из всех SCSS-файлов компилируется только `main.scss`. Остальные стилевые файлы импортируются в него
- страницы сайта находятся в папке `src/pages`
  _ каждая страница (в том числе главная) наследует шаблон `src/views/layouts/default.pug`
  _ главная страница: `src/views/index.pug`
- шрифты находятся в папке `src/fonts`
- изображения находятся в папке `src/img` \* изображение для генерации фавиконок должно находиться в папке `src/img` и иметь размер не менее `100px x 100px`
- все сторонние библиотеки устанавливаются в папку `node_modules`
  _ для их загрузки воспользуйтеcь командой `yarn add package_name`
  _ для подключения JS-файлов библиотек импортируйте их в JS-файл БЭМ-блока (то есть тот БЭМ-блок, который использует скрипт), например:
  `javascript import $ from "jquery";` \* для подключения стилевых файлов библиотек импортируйте их в файл `src/styles/_libs.scss` (который в свою очередь импортируется в файл
  `src/styles/main.scss`)
- в вёрстку подключаются только минифицированные CSS и JS-файлы.

## БЭМ

В сборке используется компонентный подход к разработке сайтов по методолгии БЭМ, когда каждый БЭМ-блок имеет свою папку, внутри которой находятся один Njk-файл, один SCSS-файл и
один JS-файл (если у блока используется скрипт). Чтобы вручную не создавать соответствующие папку и файлы, достаточно в консоли прописать следующие команды:

- `bem create my-block` - для создания папки БЭМ-блока, где `my-block` - имя БЭМ-блока
- `bem create my-component -l src/blocks/components` для создания компонента
- `bem create my-component -l src/blocks/components && bem create my-block` - создать всё вместе

## WebP 

В сборщик включена поддержка WebP. WebP — это формат графики, разработанный Google в 2010 году. Он был создан как альтернатива PNG и JPG и отличается от них гораздо меньшим размером при том же качестве изображения. Подробная информация по использованию [тут](https://vk.com/@vk_it-webp).

## Контакты

- ВКонтакте: [@ndeviant](https://vk.com/ndeviant)
- Telegram: [@ndeviant](https://t-do.ru/ndeviant)
